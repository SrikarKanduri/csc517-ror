<p id="notice"><%= notice %></p>

<p>
  <strong>Id:</strong>
  <%= @tour.id %>
</p>

<p>
  <strong>Name:</strong>
  <%= @tour.name %>
</p>

<p>
  <strong>Description:</strong>
  <%= @tour.description %>
</p>

<p>
  <strong>Created at:</strong>
  <%= @tour.created_at %>
</p>

<p>
  <strong>Updated at:</strong>
  <%= @tour.updated_at %>
</p>

<p>
  <strong>Price:</strong>
  <%= @tour.price %>
</p>

<p>
  <strong>Booking deadline:</strong>
  <%= @tour.booking_deadline %>
</p>

<p>
  <strong>From date:</strong>
  <%= @tour.from_date %>
</p>

<p>
  <strong>To date:</strong>
  <%= @tour.to_date %>
</p>

<p>
  <strong>Total seats:</strong>
  <%= @tour.total_seats %>
</p>

<p>
  <strong>Op email:</strong>
  <%= @tour.op_email %>
</p>

<p>
  <strong>Op phone:</strong>
  <%= @tour.op_phone %>
</p>

<p>
  <strong>Status:</strong>
  <%= Tour.statuses[@tour.status] %>
</p>

<div><h2>Itinerary:</h2></div>

<% @tour.tour_locations.each do |loc| %>
  <div>
    <p>
      <strong>Country:</strong>
      <%= loc.country %>
    </p>
  </div>

  <div>
    <p>
      <strong>State/Province:</strong>
      <%= loc.state_or_province %>
    </p>
  </div>
<% end %>

<!--If the currently logged in user is a customer, allow them book or bookmark this tour-->
<% if current_user.role.eql? 'customer' %>
  <hr>
    <div>
      <span>
        <% if @user_tour_rec && @user_tour_rec.bookmarked? %>
          <div class="tour-bookmark">
            <span>Bookmarked!</span>
          </div>
        <% else %>
          <%= form_with :url => bookmark_path, method: :post, html: {class: "tour-bookmark"} do |f| %>
            <%= f.hidden_field :tour_id, :value => @tour.id %>
              <%= f.submit "Bookmark Tour" %>
          <% end %>
        <% end %>
      </span>

      <span>
        <%= form_with url: {action: "book"}, html: {} do |f| %>
          <%= f.submit "Book Tour" %>
          <%= f.label :num_seats, "# seats: " %>
          <%= f.select(:num_seats, options_for_select(1..1000)) %>
        <% end %>
      </span>
    </div>
  <hr>
<% end %>

<!--Only show the edit link if the current user can 'manage' this tour-->
<% if can? :manage, @tour %>
  <%= link_to 'Edit', edit_tour_path(@tour) %> |
<% end %>

<%= link_to 'Back', tours_path %>
